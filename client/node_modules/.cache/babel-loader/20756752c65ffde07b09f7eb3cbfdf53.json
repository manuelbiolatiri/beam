{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/manuel/flenjo/client/src/views/landing/partials/VerifyCode.jsx\",\n    _s = $RefreshSig$();\n\nimport { Button } from \"../../../components\";\nimport OtpInput from \"react-otp-input\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { SIGNUP } from \"../../../redux/actions/types\";\nimport axiosRequest from \"../../../utils/apiservices\";\nimport { apiRoutes } from \"../../../utils/apiRoutes\";\nimport { encryptData } from \"../../../helpers\";\nimport { showToast } from \"../../../utils\";\nimport { resend } from \"../../../icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const VerifyCode = ({\n  goBack,\n  phoneNumber,\n  password\n}) => {\n  _s();\n\n  const [otp, setOtp] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const phoneVerification = async () => {\n    setLoading(!loading);\n\n    try {\n      const {\n        data\n      } = await axiosRequest(\"post\", apiRoutes.signup, {\n        code: otp,\n        phone: phoneNumber.toString(),\n        password\n      });\n      const {\n        token,\n        user\n      } = data.data;\n      localStorage.setItem(\"user\", encryptData(user));\n      localStorage.setItem(\"access_token\", encryptData(token.access));\n      dispatch({\n        type: SIGNUP.SUCCESS,\n        payload: user\n      });\n      history.push(\"/accountsettings\", {\n        termsAndCondition: true\n      });\n    } catch (err) {\n      console.log(err); //err handler here and notification if needed\n\n      let {\n        data\n      } = err === null || err === void 0 ? void 0 : err.response;\n\n      if (data) {\n        showToast(data === null || data === void 0 ? void 0 : data.error, \"error\");\n      } else {\n        showToast(\"!Oops something went wrong. We are looking at it\", \"error\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resendVerificationCode = async () => {\n    try {\n      await axiosRequest(\"post\", apiRoutes.verificationCode, {\n        type: \"phone\",\n        phone: \"0\" + phoneNumber.toString()\n      });\n    } catch (err) {//err handler here and notification if needed\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    phoneVerification();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"phone\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Enter Verification Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"code-resend flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Provide the code sent to \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: `0${phoneNumber}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"resend\",\n          onClick: resendVerificationCode,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: resend,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), \" Resend\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" mt-3\",\n      children: /*#__PURE__*/_jsxDEV(OtpInput, {\n        value: otp,\n        onChange: otp => setOtp(otp),\n        shouldAutoFocus: true,\n        numInputs: 6,\n        separator: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\xA0 \\xA0 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 22\n        }, this),\n        inputStyle: \"otp-input\",\n        containerStyle: \"otp-cont\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      text: \"continue\",\n      className: \"phone-cont\",\n      disabled: otp.length < 6 || loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"back-btn\",\n      onClick: goBack,\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(VerifyCode, \"xmtB0SmMiO/RbCWSwdjdiobcSRw=\", false, function () {\n  return [useHistory, useDispatch];\n});\n\n_c = VerifyCode;\nexport default VerifyCode;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerifyCode\");","map":{"version":3,"sources":["/Users/user/Desktop/manuel/flenjo/client/src/views/landing/partials/VerifyCode.jsx"],"names":["Button","OtpInput","useState","useHistory","useDispatch","SIGNUP","axiosRequest","apiRoutes","encryptData","showToast","resend","VerifyCode","goBack","phoneNumber","password","otp","setOtp","loading","setLoading","history","dispatch","phoneVerification","data","signup","code","phone","toString","token","user","localStorage","setItem","access","type","SUCCESS","payload","push","termsAndCondition","err","console","log","response","error","resendVerificationCode","verificationCode","handleSubmit","e","preventDefault","length"],"mappings":"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","sourcesContent":["import { Button } from \"../../../components\";\nimport OtpInput from \"react-otp-input\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { SIGNUP } from \"../../../redux/actions/types\";\n\nimport axiosRequest from \"../../../utils/apiservices\";\nimport { apiRoutes } from \"../../../utils/apiRoutes\";\nimport { encryptData } from \"../../../helpers\";\nimport { showToast } from \"../../../utils\";\nimport { resend } from \"../../../icons\";\n\nexport const VerifyCode = ({ goBack, phoneNumber, password }) => {\n\n  const [otp, setOtp] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const history = useHistory();\n\n  const dispatch = useDispatch();\n\nconst phoneVerification = async () => {\n    setLoading(!loading);\n\n    try {\n        const { data } = await axiosRequest(\"post\", apiRoutes.signup, {\n          code: otp,\n          phone: phoneNumber.toString(),\n          password\n        });\n        const { token, user } = data.data;\n\n        localStorage.setItem(\"user\", encryptData(user))\n        localStorage.setItem(\"access_token\", encryptData(token.access))\n\n        dispatch({type: SIGNUP.SUCCESS, payload: user});\n        history.push(\"/accountsettings\", {termsAndCondition: true});\n\n      } catch (err) {\n          console.log(err)\n        //err handler here and notification if needed\n        let {data} = err?.response;\n        if(data){\n            showToast(data?.error, \"error\")\n        } else{\n            showToast(\"!Oops something went wrong. We are looking at it\", \"error\")\n        }\n      } finally {\n        setLoading(false);\n    }\n};\n\n\n\n  const resendVerificationCode = async () => {\n    try {\n      await axiosRequest(\"post\", apiRoutes.verificationCode, {\n        type: \"phone\",\n        phone: \"0\" + phoneNumber.toString(),\n      });\n    } catch (err) {\n      //err handler here and notification if needed\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    phoneVerification();\n  };\n\n  return (\n    <form className=\"phone\" onSubmit={handleSubmit}>\n      <div className=\"form-title\">\n        <h4>Enter Verification Code</h4>\n        <div className=\"code-resend flex justify-between\">\n          <p>\n            Provide the code sent to <span>{`0${phoneNumber}`}</span>\n          </p>\n          <p className=\"resend\" onClick={resendVerificationCode}>\n            <img src={resend} alt=\"\" /> Resend\n          </p>\n        </div>\n      </div>\n\n      <div className=\" mt-3\">\n        <OtpInput\n          value={otp}\n          onChange={(otp) => setOtp(otp)}\n          shouldAutoFocus\n          numInputs={6}\n          separator={<span>&nbsp; &nbsp; </span>}\n          inputStyle=\"otp-input\"\n          containerStyle=\"otp-cont\"\n        />\n      </div>\n\n      <Button\n        text=\"continue\"\n        className=\"phone-cont\"\n        disabled={otp.length < 6 || loading}\n      />\n\n      <p className=\"back-btn\" onClick={goBack}>\n        Back\n      </p>\n    </form>\n  );\n};\n\nexport default VerifyCode;\n"]},"metadata":{},"sourceType":"module"}